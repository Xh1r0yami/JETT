{% extends "base.html" %}
{% load static %}

{% block title %}Lamar Pekerjaan{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'applications/seeker/css/apply_job.css' %}">

<section class="apply-wrapper">

  <div style="width: 800px; max-width: 100%;">

    <!-- JUDUL -->
    <h1 class="page-title">Lamar Pekerjaan</h1>

    <!-- KOTAK PUTIH -->
    <div class="apply-container">

      <!-- HEADER PEKERJAAN -->
      <div class="modal-header">

        <div>
          <h2 class="job-title">{{ job.title }}</h2>
          <p class="company-name">{{ job.company.full_name }}</p>
          <p>{{ job.get_job_type_display }}</p>
          <p>{{ job.get_location_display }}</p>
          <p>{{ job.get_salary_range_display }}</p>
          <p class="date">Dibuat {{ job.created_at|date:"d M Y" }}</p>
        </div>

        <div>
          {% if job.company.company_profile.logo %}
            <img
              src="{{ job.company.company_profile.logo.url }}"
              class="company-logo"
              alt="Logo Perusahaan"
            >
          {% else %}
            <div class="company-logo-placeholder">
              {{ job.company.full_name|slice:":1" }}
            </div>
          {% endif %}
        </div>

      </div>

      <!-- DESKRIPSI -->
      <div class="modal-section">
        <h3>Deskripsi Tugas</h3>
        <p class="multiline">{{ job.tasks }}</p>
      </div>

      <!-- PERSYARATAN -->
      <div class="modal-section">
        <h3>Persyaratan</h3>
        <p class="multiline">{{ job.requirements }}</p>
      </div>

      <!-- FORM APPLY -->
      <form method="POST" enctype="multipart/form-data" class="apply-form" novalidate>
        {% csrf_token %}

        <!-- ===== UPLOAD CV ===== -->
        <div class="form-group">
          <label for="id_cv">Upload CV (PDF)</label>

          <input
            type="file"
            name="cv"
            id="id_cv"
            accept=".pdf"
            required
          >

          <!-- NOTE UKURAN -->
          <small style="color:#666; display:block; margin-top:6px;">
            Maksimal ukuran file: <strong>2 MB</strong> (PDF)
          </small>

          <!-- ERROR VALIDASI -->
          {% if form.cv.errors %}
            <div style="
              margin-top:8px;
              color:#d32f2f;
              font-size:14px;
            ">
              {{ form.cv.errors.0 }}
            </div>
          {% endif %}
        </div>

        <!-- TOMBOL -->
        <div style="display:flex; justify-content:flex-end; gap:12px; margin-top:24px;">
          <a
            href="{% url 'jobs:job_list' %}"
            class="btn-submit"
            style="background:#e0e0e0; color:#333;"
          >
            Batal
          </a>

          <button type="submit" class="btn-submit">
            Kirim Lamaran
          </button>
        </div>

      </form>

    </div>
  </div>

</section>
{% endblock %}
